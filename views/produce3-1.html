<!DOCTYPE html>
<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- Bootstrap CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.rtl.min.css"
            integrity="sha384-7mQhpDl5nRA5nY9lr8F1st2NbIly/8WqhjTp+0oFxEA/QUuvlbF6M1KXezGBh3Nb"
            crossorigin="anonymous"
        />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />

        <title>UDAUM EDU PRODUCE</title>
        <link rel="stylesheet" href="style.css" />

        <link rel="stylesheet" href="style.css" />
        <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet" />

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    </head>

    <body style="background-color: #fafafa;">
        <!-- 알림 드롭바-->
        

        <nav
            class="navbar navbar-expand-lg nav-distance"
            style="background-color: #fafafa; padding-bottom: 25px;"
        >
            <div class="container-fluid" style="padding-left: 0px; padding-right: 0px;">
                <div class="navbar-logo">
                    <img src="img/logo3.png" style="width: 46px; height: 46px;" />
                </div>

                <div class="navbar-logo_udaum">
                    <img src="img/logo_udaum3.png" style="width: 85px; height: 15px;" />
                </div>

                <!-- 홈으로 돌아가기 버튼
                <a class="navbar-brand" href="#">Navbar</a>
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarNav"
                    aria-controls="navbarNav"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
-->

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav" style="padding-left: 25px;">
                        <li class="nav-item1" style="height: 50px;">
                            <a
                                class="nav-link"
                                href="/afterLogin"
                                style="
                                    width: 28px;
                                    padding-left: 0px;
                                    padding-right: 0px;
                                    line-height: 46px;
                                "
                                >홈</a
                            >
                            <img
                                class="imgbar"
                                src="img/bar1.png"
                                style="width: 28px; height: 5px;"
                            />
                        </li>
                        <li class="nav-item2" style="height: 50px;">
                            <a
                                class="nav-link"
                                href="/makeContents1"
                                style="padding-left: 0px; padding-right: 0px; line-height: 46px;"
                                >콘텐츠 제작하기</a
                            >
                            <img
                                class="imgbar"
                                src="img/bar1.png"
                                style="width: 28px; height: 5px;"
                            />
                        </li>
                    </ul>
                </div>

                <!--네비게이션 우측-->
                <div class="navbar-login">
                    <button type="button" id="profile_btn" onclick="location.href = '/myPage'" style="padding-left: 31px;">
                        <img src="img/profile.png" style="width: 37px; height: 37px;" />
                    </button>
                </div>

                
            </div>

        </nav>


        <nav class="navbar navbar-expand-lg nav-distance" style="background-color: fafafa;">
            <div class="container-fluid" style="padding-left: 0px; padding-right: 0px;">
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav" style="padding-left: 46px; padding-top: 50px;">
                        <li class="produce-nav-item1" style="height: 50px; width: 93px;">
                            <a
                                class="produce-nav-link"
                                href="/makeContents1"
                                style="
                                    width: 28px;
                                    padding-left: 0px;
                                    padding-right: 0px;
                                    line-height: 46px;
                                "
                                
                                >STEP1</a
                            >
                            <img
                                class="imgbar2"
                                src="img/make_bar1.png"
                                style="width: 45px; height: 5px;"
                            />
                        </li>
                        <li class="produce-nav-item2" style="height: 50px;">
                            <a
                                class="produce-nav-link"
                                href="/makeContents2"
                                style="padding-left: 0px; padding-right: 0px; line-height: 46px;"
                                >STEP2</a
                            >
                            <img
                                class="imgbar2"
                                src="img/make_bar1.png"
                                style="width: 45px; height: 5px;"
                            />
                        </li>

                        <li class="produce-nav-item3" style="height: 50px;">
                            <a
                                class="produce-nav-link"
                                href="/makeContents3_1"
                                style="
                                    padding-left: 0px;
                                    padding-right: 0px;
                                    line-height: 46px;
                                    color: #0606c6;
                                "
                                >STEP3</a
                            >
                            <img
                                class="imgbar2"
                                src="img/make_bar1.png"
                                style="width: 45px; height: 5px; display: block;"
                            />
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="produce_main_writing">
            문제 입력하기
        </div>

        <div class="produce_serve_writing">
            문제와 보기, 답안을 입력해 보세요
        </div>

        <div class="problem">
            <div class="problem_list">
                <span class="problem_list_num"> 문제 1번 </span>
            </div>

            <div class="problem_contents1">
                <div class="search1">
                    <input type="text" placeholder="1번 문제를 입력하세요(공백 포함 100자 이내)" id = "quiz" onchange = "quizChange()">
                </div>
                <img class="ex1" src="img/ex1.png" onclick = "window.open('img/1047.png','오지선다형','width=430,height=500')"/>
                <br>
                
                 <div class="search1">
                    <input type="text" placeholder="1번 문제 해설을 입력하세요 (공백 포함 100자 이내)" id = "quizCommentary" onchange = "quizCommentaryChange()">
                </div>
                      <img class="produce3_1_intro" src="img/produce3_1_intro.png" />

                
                <fieldset class="problem_contents1_option">
  <label >
    <input type="radio" name="contact" value="list1" id = "ans0" onchange = "ansChange(0)"/>
    <span>
        
            <input type="text" placeholder="보기를 입력하세요" style="    border:none; vertical-align: bottom;" id = "example0" onchange = "exampleChange(0)"/>
           
        
    </span>
  </label>
<br>
   <label>
      <input type="radio" name="contact" value="list2" id = "ans1" onchange = "ansChange(1)"/>
    <span>
        
            <input type="text" placeholder="보기를 입력하세요" style="    border:none;" id = "example1" onchange = "exampleChange(1)"/>
    </span>
  </label>
<br>

  <label>
    <input type="radio" name="contact" value="list3" id = "ans2" onchange = "ansChange(2)"/>
      <span>
          
            <input type="text" placeholder="보기를 입력하세요" style="    border:none;" id = "example2" onchange = "exampleChange(2)"/>
      </span>
  </label>
<br>

  <label>
    <input type="radio" name="contact" value="list4" id = "ans3" onchange = "ansChange(3)"/>
      <span>
            <input type="text" placeholder="보기를 입력하세요" style="    border:none; " id = "example3" onchange = "exampleChange(3)"/>
      </span>
  </label>
                   <br> 
                      <label>
    <input type="radio" name="contact" value="list5" id = "ans4" onchange = "ansChange(4)"/>
      <span>
            <input type="text" placeholder="보기를 입력하세요" style="    border:none;" id = "example4" onchange = "exampleChange(4)"/>
      </span>
  </label>
                    
                    
</fieldset>
                
                
                
                
                
            </div>
        </div>
            <div class="produce_next" style="text-align: right;">
           
                <button type="button" id="back_btn" onclick="location.href='/makeContents2'">
                    <img
                        src="img/back_btn.png"
                        style="margin-top: 0px; width: 119px; height: 48px;"
                    />
                </button>
                
                 <button type="button" id="ok_btn" class= 'submitButton'>
                    <img
                        src="img/ok_btn.png"
                        style="margin-top: 0px; margin-right: 290px;width: 119px; height: 48px;"
                    />
                </button>
                
            </div>
        
        
        <script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
        <script>
            var quizValue, quizCommentaryValue
            var exp = ['-', '-', '-', '-', '-']
            var ans = 0;
            // 로컬스토리지에 quizName , quizCommentary , example들을 '-'로 초기화 , ans는 오지선다 중 정답
            localStorage.setItem('quizName' , '-')
            localStorage.setItem('quizCommentary' , '-')
            localStorage.setItem('example0' , '-')
            localStorage.setItem('example1' , '-')
            localStorage.setItem('example2' , '-')
            localStorage.setItem('example3' , '-')
            localStorage.setItem('example4' , '-')

            function quizChange(){
                quizValue = document.getElementById("quiz").value
                localStorage.setItem(`quizName` , quizValue)
                // 퀴즈값을 입력하면 로컬스토리지에 quizName의 value 값을 바꾼다
                console.log(quizValue)
            }
            
            function quizCommentaryChange(){
                quizCommentaryValue = document.getElementById("quizCommentary").value
                localStorage.setItem(`quizCommentary` , quizCommentaryValue)
                // 퀴즈값을 입력하면 로컬스토리지에 quizCommentary의 value 값을 바꾼다
                console.log(quizCommentaryValue)
            }
            function exampleChange(exampleIdx){
                exp[`${exampleIdx}`] = document.getElementById(`example${exampleIdx}`).value
                // 보기를 입력하면 로컬스토리지에 example의 value 값을 바꾼다
                localStorage.setItem(`example${exampleIdx}` , exp[`${exampleIdx}`])
            }
            function ansChange(ansIdx){
                // 정답이 몇번째인지 바꾸는 함수
                ans = ansIdx;
            }

            function checkContents(){
                //로컬에 저장된 값이 '-' 인 경우, 입력이 이뤄지지 않은 경우이다, 입력이 완료되었나를 알아보기 위한 함수
                if(localStorage.getItem('quizName') == '-') return false
                else if(localStorage.getItem('quizCommentary') == '-') return false
                else if(localStorage.getItem('example0') == '-') return false
                else if(localStorage.getItem('example1') == '-') return false
                else if(localStorage.getItem('example2') == '-') return false
                else if(localStorage.getItem('example3') == '-') return false
                else if(localStorage.getItem('example4') == '-') return false
                else{
                    return true
                }

            }
            $('.submitButton').click(function () {
                // 퀴즈 정보를 다 입력하면 /makeContents3_1 페이지로 post 요청하는 코드입니다
                if(checkContents() == false){
                    alert('❌컨텐츠를 입력해주세요!❌')
                    //checkContents()가 false 이면 콘텐츠 입력이 완료되지 않은 경우이다.
                }
                // 그 외에는 post 요청 , 메인페이지로 이동
                else{
                    $.ajax({
                        url: '/makeContents3_1',
                        type: 'post',
                        data: {
                            id: localStorage.getItem('loginId'),
                            quizVal: `${quizValue}`,
                            quizCommentaryVal: `${quizCommentaryValue}`,
                            example: `${exp}`,
                            ansArr: `${ans}`,
                            contentsType: 1
                        },
                        dataType: 'JSON'
                    
                        })
                        alert('😀컨텐츠 저장이 완료되었습니다')
                        location.href = '/'
                    }
                }
            )

        </script>
        
    </body>
</html>