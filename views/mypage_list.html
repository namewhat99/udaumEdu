<!DOCTYPE html>
<html>
  <head>
    <!-- 마이페이지 main-->
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.rtl.min.css"
      integrity="sha384-7mQhpDl5nRA5nY9lr8F1st2NbIly/8WqhjTp+0oFxEA/QUuvlbF6M1KXezGBh3Nb"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <title>UDAUM EDU MYPAGE</title>
    <link rel="stylesheet" href="style.css" />

    <link rel="stylesheet" href="style.css" />
    <link
      href="https://getbootstrap.com/docs/5.2/assets/css/docs.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>

  <body style="background-color: #fafafa">
    <!-- 알림 드롭바-->
   

    <nav
      class="navbar navbar-expand-lg nav-distance"
      style="background-color: #fafafa; padding-bottom: 25px"
    >
      <div
        class="container-fluid"
        style="padding-left: 0px; padding-right: 0px"
      >
        <div class="navbar-logo">
          <img src="img/logo3.png" style="width: 46px; height: 46px" />
        </div>

        <div class="navbar-logo_udaum">
          <img src="img/logo_udaum3.png" style="width: 85px; height: 15px" />
        </div>

        <!-- 홈으로 돌아가기 버튼
                <a class="navbar-brand" href="#">Navbar</a>
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarNav"
                    aria-controls="navbarNav"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
-->

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav" style="padding-left: 25px">
            <li class="nav-item1" style="height: 50px">
              <a
                class="nav-link"
                href="/afterLogin"
                style="
                  width: 28px;
                  padding-left: 0px;
                  padding-right: 0px;
                  line-height: 46px;
                  font-family: pretendard;
                "
                >홈</a
              >
              <img
                class="imgbar"
                src="img/bar1.png"
                style="width: 28px; height: 5px"
              />
            </li>
            <li class="nav-item2" style="height: 50px">
              <a
                class="nav-link"
                href="/makeContents1"
                style="padding-left: 0px; padding-right: 0px; line-height: 46px; font-family: pretendard;"
                >콘텐츠 제작하기</a
              >
              <img
                class="imgbar"
                src="img/bar1.png"
                style="width: 28px; height: 5px"
              />
            </li>
          </ul>
        </div>

        <!--네비게이션 우측-->
        <div class="navbar-login">
          <button
            type="button"
            id="profile_btn"
            onclick=""
            style="padding-left: 31px"
          >
            <img src="img/profile.png" style="width: 37px; height: 37px" />
          </button>
        </div>
      </div>
    </nav>

    <nav
      class="navbar navbar-expand-lg nav-distance"
      style="background-color: fafafa; padding-left: 94px"
    >
      <div
        class="container-fluid"
        style="padding-left: 0px; padding-right: 0px"
      >
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav" style="padding-left: 46px; padding-top: 50px">
            <!-- <li class="mypage-nav-item1" style="height: 50px; width: 105px">
              <a
                class="mypage-nav-link"
                href="/myPage"
                style="
                  padding-left: 0px;
                  padding-right: 0px;
                  line-height: 46px;

                  width: 56px;
                  height: 18px;

                  font-family: Pretendard;
                  font-size: 15px;

                  text-align: left;
                  color: #c5c5c5;
                "
                >정렬기준</a
              >
              <img
                class="imgbar2"
                src="img/mypage_bar.png"
                style="width: 59px; height: 5px"
              />
            </li> -->
            <li class="mypage-nav-item2" style="height: 50px">
              <a
                class="mypage-nav-link"
                href="/myPage"
                style="
                  padding-left: 0px;
                  padding-right: 0px;
                  line-height: 46px;
                  color: #0606c6;
                "
                >최근 생성일</a
              >
              <img
                class="imgbar2"
                src="img/mypage_bar.png"
                style="width: 78x; height: 5px; display: block"
              />
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="mypage_main">
    
    </div>
      <div class="modal">
        <div class="modal_content">
          <img src="img/754.png" srcset="img/754@2x.png 2x, img/754@3x.png 3x" class="modal_image">
          <form>
            <input type= 'text' class= 'modal_input'>
          </form>
          <form>
            <input type= 'image' src="img/981.png" srcset="img/981@2x.png 2x, img/981@3x.png 3x" class="modal_confirm">
          </form>
          <form>
            <input type='image' src="img/980.png" srcset="img/980@2x.png 2x, img/980@3x.png 3x" class="modal_cancel">
          </form>
        </div>
      </div>
      <div class="modal">
        <div class="modal_content">
          <img src="img/1110.png" srcset="img/1110@2x.png 2x, img/1110@3x.png 3x" class="-\31 110">
            <input type= 'text' class= 'modal_input'>
          <form>
            <input type= 'image' src="img/981.png" srcset="img/981@2x.png 2x, img/981@3x.png 3x" class="modal_confirm">
          </form>
          <form>
            <input type='image' src="img/980.png" srcset="img/980@2x.png 2x, img/980@3x.png 3x" class="modal_cancel">
          </form>
        </div>
      </div>

    <script
      src="https://code.jquery.com/jquery-3.6.3.js"
      integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
      crossorigin="anonymous"
    ></script>
    

    <script id = "template-list-item", type="text/template">
      <li>
        <div class="mypage_contents_img" style = "overflow: hidden">
          {img}
        </div>
        <br />
        <div class="mypage_contents_box">
          <div class="mypage_contents_title">콘텐츠 {num}</div>

          <br />
        </div>
      </li>
    </script>

    <script>

        fetch("/api/myPage", {
            method: "GET",
            headers: {
                id: localStorage.getItem("loginId")
            }
        }).then(res => res.json()).then(data => {

            var html = document.querySelector('#template-list-item').innerHTML;
            var resultHTML = `<ul
            class="mypage_main_line"
            style="
              padding-top: 0px;
              margin-left: 0px;
              width: 1948px;
              margin-right: 0px;
              padding-bottom: 0px;
              height: 405px;
            "
          >
            <li style="border: none">
              <div class="mypage_contents_img" style="height: 363px">
                <button
                  type="button"
                  id="newcreate_btn"
                  onclick="location.href='/makeContents1'"
                >
                  <img class="mypage_newcreate" src="img/mypage_newcreate.png" />
                </button>
    
                <br />
                <img
                  class="mypage_newcreate_text"
                  src="img/mypage_newcreate_text.png"
                  style="width: 150px"
                />
              </div>
              <br />
              <div class="mypage_contents_box"></div>
            </li>`

            for(i = 0; i < data.length; i++){
              console.log(data.length)
              if(i == 4 || i == 9){
                resultHTML += `<ul
                class="mypage_main_line"
                style="
                  padding-top: 0px;
                  margin-left: 0px;
                  width: 1948px;
                  margin-right: 0px;
                  padding-bottom: 0px;
                  height: 405px;
                  z-index: 1;
                "
              >`
              }

              if(data[i].contentsType == '1'){
                resultHTML += html.replace("{img}", `<img src = "img/2002.png" width = "275" height = "275" border-radius = "20px 20px 0 0">`).replace("{num}", data[i].count) 
              }
              else if(data[i].contentsType == '2'){
                resultHTML += html.replace("{img}", `<img src = "img/2000.png" width = "275" height = "275" border-radius = "20px 20px 0 0">`).replace("{num}", data[i].count) 
              }
              else{
                resultHTML += html.replace("{img}", `<img src = "img/2001.png" width = "275" height = "275" border-radius = "20px 20px 0 0">`).replace("{num}", data[i].count) 
              }

              if(i == 3 || i == 8 || i == 13 || i == data.length - 1){
                resultHTML += `</ul>`
              }
              document.querySelector(`.mypage_main`).innerHTML = resultHTML
            }
            console.log(resultHTML)

            
        }).catch(e => {
            console.error(e);
        })

        

      $(function () {
        
        $("#dropdown_delete").click(function () {
          $(".modal").fadeIn();
        });

        $("#dropdown_changeName").click(function () {
          $(".modal").fadeIn();
        });

        $("#modal_confirm").click(function () {
          $.ajax({
            url: "/",
            type: "post",
            data: {},
          });
        });

        $(".modal_cancel").click(function () {
          $(".modal").fadeOut();
        });
      });
    </script>

  </body>
</html>
